#******** DO NOT EDIT THIS FILE ********#
# this is the make file to make dependencies for the project

include make.cfg

source_depends := $(depend_sources:%=./$(depend)/%.d)
test_depends := $(testdepend_sources:%=./$(testdepend)/%.d)

depend: make_source_depends make_test_depends
.PHONY: depend

make_source_depends:
	@echo 'making source dependencies ...'
	-@rm -rf ./$(depend)
	-@mkdir -p ./$(depend)
	@set -e; \
	$(foreach src, $(depend_sources), \
	    $(CC) -MM $(CFLAGS) $(src).c > ./$(depend)/$(src).d.0;)
	@set -e; \
	$(foreach df, $(source_depends), \
	    sed 's,\(.*\)\.o,$(objects)\/\1.o,' < $(df).0 > $(df).1;)
	@set -e; \
	$(foreach df, $(source_depends), \
	    sed 's,$$, | $(objects),' < $(df).1 > $(df).2 ;)
	@set -e; \
	$(foreach df, $(source_depends), \
	    sed 's,\\ | $(objects),\\,' < $(df).2 > $(df) ;)
	@set -e; \
	$(foreach df, $(source_depends), \
	    echo '\t$$(CC) -c $$(CFLAGS) $$< -o $$@' >> $(df);)
	-@rm -rf ./$(depend)/*.d.?
	@echo 'dependencies made in ./$(depend)'
.PHONY: make_source_depends

make_test_depends:
	@echo 'making test dependencies ...'
	-@rm -rf ./$(testdepend)
	-@mkdir -p ./$(testdepend)
	@set -e; \
	$(foreach t, $(testdepend_sources), \
	    $(CC) -MM $(CFLAGS) ./$(test)/$(t).c \
	    > ./$(testdepend)/$(t).d.0;)
	@set -e; \
	$(foreach df, $(test_depends), \
	    sed 's,\(.*\)\.o,$(testobjects)\/\1.o,' < $(df).0 > $(df).1;)
	@set -e; \
	$(foreach df, $(test_depends), \
	    sed 's,$$, | $(testobjects),' < $(df).1 > $(df).2 ;)
	@set -e; \
	$(foreach df, $(test_depends), \
	    sed 's,\\ | $(testobjects),\\,' < $(df).2 > $(df) ;)
	@set -e; \
	$(foreach df, $(test_depends), \
	    echo '\t$$(CC) -c $$(CFLAGS) $$< -o $$@' >> $(df);)
	-@rm -rf ./$(testdepend)/*.d.?
	@echo 'dependencies made in ./$(testdepend)'
.PHONY: make_test_depends

clean: 
	-rm -rf ./$(testdepend)
	-rm -rf ./$(depend)

